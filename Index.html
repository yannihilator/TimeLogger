<!DOCTYPE html>
<html lang="en">
    <head>
        <title id="tabTitle">Time Logger</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <script src="script.js"></script>
        <script src="components/nav.js"></script>
        <script src="components/entryModal.js"></script>
    </head>
    <body>
        <header>
          <script>nav("today");</script>
        </header>
        <br>
        <div class="text-center">
            <h1 id="dateHeader" style="color: #222529;" class="display-5">Time Log   
                <script>
                    document.write(new Date().toLocaleString("en-US", {year: 'numeric', month: 'long', day: 'numeric'}).fontcolor("whitesmoke"));
                </script>
            </h1>
            <br>
            <script type="text/javascript">
              var entries = TodaysEntries();
              var totalDuration = ConvertDateTicks(entries.map(function(entry) { return entry.endTime - entry.startTime; }).reduce((a, b) => a + b, 0), true);
              document.write('<div class="text-center">' +
              '  <h1 class="display-6" style="color: #222529; font-size: x-large; font-weight: bold;">' +
              '    Total ' +
              '    <span id="totalDuration" class="display-6" style="color: #222529; font-size: x-large;">' + totalDuration.hour + ":" + totalDuration.minute + ":" + totalDuration.second + '</span>' +
              '  </h1>' +
              '</div>');
            </script>
            <hr style="width: 85%; margin: auto; height: 3px; background: #222529;"/>
            <br>
            <button id="startStopButton" onclick="ToggleTimer()" style="background-color:#52057b;" type="button" class="btn btn-dark btn-lg">Start</button>
            <br>
            <br>
            <h3 id="timeElapsed" class="display-6" style="color: whitesmoke;">00:00:00</h3>
            <br>
            <hr style="width: 85%; margin: auto;"/>
            <br>
        </div>
        <br>
        <div class="row justify-content-md-center">
          <table class="table table-hover table-striped caption-top" style="width: 60%;">
            <caption class="display-6 text-center" style="color: #222529; font-size: large;">Totals by Charge Number</caption>
            <style>
              td{border: none};
              th{border-bottom-width: thick; border-bottom-color: #222529;}
            </style>
            <thead>
              <tr style="border-width: thick; border-color: #222529; border-style: double; border-right-style: solid; border-left-style: solid; border-left-width: thin; border-right-width: thin;">
                <th scope="col">Charge Number</th>
                <th scope="col">Duration</th>
                <th scope="col">Value</th>
              </tr>
            </thead>
            <tbody>
              <script type="text/javascript">
                entries.forEach(entry => {
                  var duration = ConvertDateTicks(entry.endTime - entry.startTime, true);
                  var startTime = ConvertDateTicks(entry.startTime, false);
                  var endTime = ConvertDateTicks(entry.endTime, false);
                  document.write('<tr>' +
                    '<td>' + entry.chargeNumber +'</td>' +
                    '<td>' + duration.hour + ":" + duration.minute + ":" + duration.second +'</td>' +
                    '<td>' + TwelveHourTime(startTime.hour, startTime.minute, startTime.second, false) + '</td>' +
                  '</tr>');
                });
              </script>
            </tbody>
          </table>
        </div>
        <br>
        <div class="row justify-content-md-center">
          <table class="table table-hover table-striped caption-top" style="width: 80%;">
            <caption class="display-6 text-center" style="color: #222529; font-size: large;">Entry List</caption>
            <style>
              td{border: none};
              th{border-bottom-width: thick; border-bottom-color: #222529;}
            </style>
            <thead>
              <tr style="border-width: thick; border-color: #222529; border-style: double; border-right: none; border-left: none; border-right-style: solid; border-left-style: solid; border-left-width: thin; border-right-width: thin;">
                <th scope="col">Charge Number</th>
                <th scope="col">Duration</th>
                <th scope="col">Start Time</th>
                <th scope="col">End Time</th>
                <th scope="col">Description</th>
              </tr>
            </thead>
            <tbody>
              <script type="text/javascript">
                entries.forEach(entry => {
                  var duration = ConvertDateTicks(entry.endTime - entry.startTime, true);
                  var startTime = ConvertDateTicks(entry.startTime, false);
                  var endTime = ConvertDateTicks(entry.endTime, false);
                  document.write('<tr>' +
                    '<td>' + entry.chargeNumber +'</td>' +
                    '<td>' + duration.hour + ":" + duration.minute + ":" + duration.second +'</td>' +
                    '<td>' + TwelveHourTime(startTime.hour, startTime.minute, startTime.second, false) + '</td>' +
                    '<td>' + TwelveHourTime(endTime.hour, endTime.minute, endTime.second, false) + '</td>' +
                    '<td>' + entry.description +'</td>' +
                  '</tr>');
                });
              </script>
            </tbody>
          </table>
        </div>

        <div id="myModal" class="modal">
          <script>entryModal()</script>
        </div>
     
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    </body>
</html>